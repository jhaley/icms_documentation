\begin{lstlisting}[label=singleton,caption=Patr\'on Singleton en acci\'on]
<?php
defined( '_JHAEXEC' ) or die( 'Access Denied' );
jhaimport('jhaley.mvc.model');

class MenuModelMenu extends JhaModel {
    public function __construct() {
        parent::__construct();
    }
    
    public function getMenus(){
    	$db = &JhaFactory::getDBO();
        $db->setQuery('SELECT m.id, m.titulo, m.descripcion, u.nombre as creador FROM #__menu as m, #__usuario as u WHERE m.usuario = u.id ORDER BY m.id');
        return $db->loadObjectList();
    }
    
	public function getMenu($id){
    	$db = &JhaFactory::getDBO();
        $db->setQuery('SELECT * FROM #__menu WHERE id = ' . $id);
        return $db->loadObject();
    }
    .....
}
?>
\end{lstlisting}
